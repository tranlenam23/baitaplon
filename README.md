# baitaplon

<div id="header">
        <p>Cờ Vua</p>
        <div id="mode">
            <div>
                <a href="/caro/caro3.html">&#160; Cờ Caro </a>
            </div>
            <div>
                <a href="">&#9679; Cờ Vua </a>
            </div>
            
        </div>
    </div>
    <div id="main1">
        <div class="clock"><input type="datetime" name="" id="clock1"></div>
        <div id="board1" >
            <div draggable="true" class="node xe_den" id = "1,1" onclick="check(1,1)" ondragstart="check(1,1)" ondrop="check(1,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_den" id = "1,2" onclick="check(1,2)" ondragstart="check(1,2)" ondrop="check(1,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_den" id = "1,3" onclick="check(1,3)" ondragstart="check(1,3)" ondrop="check(1,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node hau_den" id = "1,4" onclick="check(1,4)" ondragstart="check(1,4)" ondrop="check(1,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node vua_den" id = "1,5" onclick="check(1,5)" ondragstart="check(1,5)" ondrop="check(1,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_den" id = "1,6" onclick="check(1,6)" ondragstart="check(1,6)" ondrop="check(1,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_den" id = "1,7" onclick="check(1,7)" ondragstart="check(1,7)" ondrop="check(1,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_den" id = "1,8" onclick="check(1,8)" ondragstart="check(1,8)" ondrop="check(1,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,1" onclick="check(2,1)" ondragstart="check(2,1)" ondrop="check(2,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,2" onclick="check(2,2)" ondragstart="check(2,2)" ondrop="check(2,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,3" onclick="check(2,3)" ondragstart="check(2,3)" ondrop="check(2,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,4" onclick="check(2,4)" ondragstart="check(2,4)" ondrop="check(2,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,5" onclick="check(2,5)" ondragstart="check(2,5)" ondrop="check(2,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,6" onclick="check(2,6)" ondragstart="check(2,6)" ondrop="check(2,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,7" onclick="check(2,7)" ondragstart="check(2,7)" ondrop="check(2,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,8" onclick="check(2,8)" ondragstart="check(2,8)" ondrop="check(2,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,1" onclick="check(3,1)" ondragstart="check(3,1)" ondrop="check(3,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,2" onclick="check(3,2)" ondragstart="check(3,2)" ondrop="check(3,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,3" onclick="check(3,3)" ondragstart="check(3,3)" ondrop="check(3,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,4" onclick="check(3,4)" ondragstart="check(3,4)" ondrop="check(3,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,5" onclick="check(3,5)" ondragstart="check(3,5)" ondrop="check(3,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,6" onclick="check(3,6)" ondragstart="check(3,6)" ondrop="check(3,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,7" onclick="check(3,7)" ondragstart="check(3,7)" ondrop="check(3,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,8" onclick="check(3,8)" ondragstart="check(3,8)" ondrop="check(3,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,1" onclick="check(4,1)" ondragstart="check(4,1)" ondrop="check(4,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,2" onclick="check(4,2)" ondragstart="check(4,2)" ondrop="check(4,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,3" onclick="check(4,3)" ondragstart="check(4,3)" ondrop="check(4,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,4" onclick="check(4,4)" ondragstart="check(4,4)" ondrop="check(4,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,5" onclick="check(4,5)" ondragstart="check(4,5)" ondrop="check(4,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,6" onclick="check(4,6)" ondragstart="check(4,6)" ondrop="check(4,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,7" onclick="check(4,7)" ondragstart="check(4,7)" ondrop="check(4,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,8" onclick="check(4,8)" ondragstart="check(4,8)" ondrop="check(4,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,1" onclick="check(5,1)" ondragstart="check(5,1)" ondrop="check(5,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,2" onclick="check(5,2)" ondragstart="check(5,2)" ondrop="check(5,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,3" onclick="check(5,3)" ondragstart="check(5,3)" ondrop="check(5,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,4" onclick="check(5,4)" ondragstart="check(5,4)" ondrop="check(5,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,5" onclick="check(5,5)" ondragstart="check(5,5)" ondrop="check(5,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,6" onclick="check(5,6)" ondragstart="check(5,6)" ondrop="check(5,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,7" onclick="check(5,7)" ondragstart="check(5,7)" ondrop="check(5,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,8" onclick="check(5,8)" ondragstart="check(5,8)" ondrop="check(5,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,1" onclick="check(6,1)" ondragstart="check(6,1)" ondrop="check(6,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,2" onclick="check(6,2)" ondragstart="check(6,2)" ondrop="check(6,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,3" onclick="check(6,3)" ondragstart="check(6,3)" ondrop="check(6,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,4" onclick="check(6,4)" ondragstart="check(6,4)" ondrop="check(6,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,5" onclick="check(6,5)" ondragstart="check(6,5)" ondrop="check(6,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,6" onclick="check(6,6)" ondragstart="check(6,6)" ondrop="check(6,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,7" onclick="check(6,7)" ondragstart="check(6,7)" ondrop="check(6,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,8" onclick="check(6,8)" ondragstart="check(6,8)" ondrop="check(6,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,1" onclick="check(7,1)" ondragstart="check(7,1)" ondrop="check(7,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,2" onclick="check(7,2)" ondragstart="check(7,2)" ondrop="check(7,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,3" onclick="check(7,3)" ondragstart="check(7,3)" ondrop="check(7,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,4" onclick="check(7,4)" ondragstart="check(7,4)" ondrop="check(7,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,5" onclick="check(7,5)" ondragstart="check(7,5)" ondrop="check(7,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,6" onclick="check(7,6)" ondragstart="check(7,6)" ondrop="check(7,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,7" onclick="check(7,7)" ondragstart="check(7,7)" ondrop="check(7,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,8" onclick="check(7,8)" ondragstart="check(7,8)" ondrop="check(7,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_trang" id = "8,1" onclick="check(8,1)" ondragstart="check(8,1)" ondrop="check(8,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_trang" id = "8,2" onclick="check(8,2)" ondragstart="check(8,2)" ondrop="check(8,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_trang" id = "8,3" onclick="check(8,3)" ondragstart="check(8,3)" ondrop="check(8,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node hau_trang" id = "8,4" onclick="check(8,4)" ondragstart="check(8,4)" ondrop="check(8,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node vua_trang" id = "8,5" onclick="check(8,5)" ondragstart="check(8,5)" ondrop="check(8,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_trang" id = "8,6" onclick="check(8,6)" ondragstart="check(8,6)" ondrop="check(8,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_trang" id = "8,7" onclick="check(8,7)" ondragstart="check(8,7)" ondrop="check(8,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_trang" id = "8,8" onclick="check(8,8)" ondragstart="check(8,8)" ondrop="check(8,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            
        </div>
        
        <script src="chess1.js"></script>
    </div>
    <div id="swap" onclick="swap()">&#8652; </div>
    <div id="return" onclick="Return()">&#8634;</div>
    <div id="main2">
        <div class="clock"><input type="datetime" name="" id="clock2"></div>
        <div id="board2" >
            <div draggable="true" class="node xe_den" id = "1,1,1" onclick="check(1,1)" ondragstart="check(1,1)" ondrop="check(1,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_den" id = "1,2,1" onclick="check(1,2)" ondragstart="check(1,2)" ondrop="check(1,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_den" id = "1,3,1" onclick="check(1,3)" ondragstart="check(1,3)" ondrop="check(1,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node hau_den" id = "1,4,1" onclick="check(1,4)" ondragstart="check(1,4)" ondrop="check(1,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node vua_den" id = "1,5,1" onclick="check(1,5)" ondragstart="check(1,5)" ondrop="check(1,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_den" id = "1,6,1" onclick="check(1,6)" ondragstart="check(1,6)" ondrop="check(1,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_den" id = "1,7,1" onclick="check(1,7)" ondragstart="check(1,7)" ondrop="check(1,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_den" id = "1,8,1" onclick="check(1,8)" ondragstart="check(1,8)" ondrop="check(1,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,1,1" onclick="check(2,1)" ondragstart="check(2,1)" ondrop="check(2,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,2,1" onclick="check(2,2)" ondragstart="check(2,2)" ondrop="check(2,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,3,1" onclick="check(2,3)" ondragstart="check(2,3)" ondrop="check(2,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,4,1" onclick="check(2,4)" ondragstart="check(2,4)" ondrop="check(2,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,5,1" onclick="check(2,5)" ondragstart="check(2,5)" ondrop="check(2,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,6,1" onclick="check(2,6)" ondragstart="check(2,6)" ondrop="check(2,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,7,1" onclick="check(2,7)" ondragstart="check(2,7)" ondrop="check(2,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_den" id = "2,8,1" onclick="check(2,8)" ondragstart="check(2,8)" ondrop="check(2,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,1,1" onclick="check(3,1)" ondragstart="check(3,1)" ondrop="check(3,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,2,1" onclick="check(3,2)" ondragstart="check(3,2)" ondrop="check(3,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,3,1" onclick="check(3,3)" ondragstart="check(3,3)" ondrop="check(3,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,4,1" onclick="check(3,4)" ondragstart="check(3,4)" ondrop="check(3,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,5,1" onclick="check(3,5)" ondragstart="check(3,5)" ondrop="check(3,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,6,1" onclick="check(3,6)" ondragstart="check(3,6)" ondrop="check(3,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,7,1" onclick="check(3,7)" ondragstart="check(3,7)" ondrop="check(3,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "3,8,1" onclick="check(3,8)" ondragstart="check(3,8)" ondrop="check(3,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,1,1" onclick="check(4,1)" ondragstart="check(4,1)" ondrop="check(4,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,2,1" onclick="check(4,2)" ondragstart="check(4,2)" ondrop="check(4,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,3,1" onclick="check(4,3)" ondragstart="check(4,3)" ondrop="check(4,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,4,1" onclick="check(4,4)" ondragstart="check(4,4)" ondrop="check(4,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,5,1" onclick="check(4,5)" ondragstart="check(4,5)" ondrop="check(4,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,6,1" onclick="check(4,6)" ondragstart="check(4,6)" ondrop="check(4,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,7,1" onclick="check(4,7)" ondragstart="check(4,7)" ondrop="check(4,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "4,8,1" onclick="check(4,8)" ondragstart="check(4,8)" ondrop="check(4,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,1,1" onclick="check(5,1)" ondragstart="check(5,1)" ondrop="check(5,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,2,1" onclick="check(5,2)" ondragstart="check(5,2)" ondrop="check(5,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,3,1" onclick="check(5,3)" ondragstart="check(5,3)" ondrop="check(5,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,4,1" onclick="check(5,4)" ondragstart="check(5,4)" ondrop="check(5,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,5,1" onclick="check(5,5)" ondragstart="check(5,5)" ondrop="check(5,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,6,1" onclick="check(5,6)" ondragstart="check(5,6)" ondrop="check(5,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,7,1" onclick="check(5,7)" ondragstart="check(5,7)" ondrop="check(5,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "5,8,1" onclick="check(5,8)" ondragstart="check(5,8)" ondrop="check(5,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,1,1" onclick="check(6,1)" ondragstart="check(6,1)" ondrop="check(6,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,2,1" onclick="check(6,2)" ondragstart="check(6,2)" ondrop="check(6,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,3,1" onclick="check(6,3)" ondragstart="check(6,3)" ondrop="check(6,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,4,1" onclick="check(6,4)" ondragstart="check(6,4)" ondrop="check(6,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,5,1" onclick="check(6,5)" ondragstart="check(6,5)" ondrop="check(6,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,6,1" onclick="check(6,6)" ondragstart="check(6,6)" ondrop="check(6,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,7,1" onclick="check(6,7)" ondragstart="check(6,7)" ondrop="check(6,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node" id = "6,8,1" onclick="check(6,8)" ondragstart="check(6,8)" ondrop="check(6,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,1,1" onclick="check(7,1)" ondragstart="check(7,1)" ondrop="check(7,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,2,1" onclick="check(7,2)" ondragstart="check(7,2)" ondrop="check(7,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,3,1" onclick="check(7,3)" ondragstart="check(7,3)" ondrop="check(7,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,4,1" onclick="check(7,4)" ondragstart="check(7,4)" ondrop="check(7,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,5,1" onclick="check(7,5)" ondragstart="check(7,5)" ondrop="check(7,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,6,1" onclick="check(7,6)" ondragstart="check(7,6)" ondrop="check(7,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,7,1" onclick="check(7,7)" ondragstart="check(7,7)" ondrop="check(7,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tot_trang" id = "7,8,1" onclick="check(7,8)" ondragstart="check(7,8)" ondrop="check(7,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_trang" id = "8,1,1" onclick="check(8,1)" ondragstart="check(8,1)" ondrop="check(8,1)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_trang" id = "8,2,1" onclick="check(8,2)" ondragstart="check(8,2)" ondrop="check(8,2)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_trang" id = "8,3,1" onclick="check(8,3)" ondragstart="check(8,3)" ondrop="check(8,3)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node hau_trang" id = "8,4,1" onclick="check(8,4)" ondragstart="check(8,4)" ondrop="check(8,4)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node vua_trang" id = "8,5,1" onclick="check(8,5)" ondragstart="check(8,5)" ondrop="check(8,5)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node tuong_trang" id = "8,6,1" onclick="check(8,6)" ondragstart="check(8,6)" ondrop="check(8,6)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node ma_trang" id = "8,7,1" onclick="check(8,7)" ondragstart="check(8,7)" ondrop="check(8,7)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            <div draggable="true" class="node xe_trang" id = "8,8,1" onclick="check(8,8)" ondragstart="check(8,8)" ondrop="check(8,8)"> <img class = "dot" src="img/dot.png" alt=""> <img class="reddot" src="img/reddot.png" alt=""></div>
            
        </div>

#main1{
    background-color: #00293C;
    position: relative;
    top: -30px;
    right: 0;
    height: 2000px;
    width: 50%;
    float: left;
}
.swapp{
    float : right !important;
}
.swappp{
    transform: rotate(180deg) !important;
}
.swapppp{
    transform: rotate(0) !important;
}
#main2{
    background-color: #00293C;
    position: relative;
    top: -30px;
    height: 2000px;
    width: 50%;
    float: left;
    
}
#header p{
    font-size: 50px;
    color: aliceblue;
}
#header{
    background-color: #00293C;
    margin: 0px;
    padding: 60px;
    text-align: center;

}
#mode{
    position: relative;
}
#mode .mode1{
    width: 50px;
    height: 20px;
}
#mode a{
    text-decoration: none;
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    color:bisque
}
#main1 #board1{
    width: 600px;
    height: 600px;
    background-color: rgba(0, 255, 255, 0);
    margin-inline: auto;
    cursor: pointer;
    border: 4px solid ;
    /* z-index: 2; */
}
#main2 #board2{
    width: 600px;
    height: 600px;
    background-color: rgba(0, 255, 255, 0);
    margin-inline: auto;
    cursor: pointer;
    /* z-index: 2; */
    transform: rotate(180deg);
    border: 4px solid ;
    /* border-color: #04fad9; */
}
#main1 #board1 .node{
    width: 74px;
    height: 74px;
    background-color: #F1F3CE;
    margin: 0;
    border: none;
    border: 0px solid;
    text-align: center;
    border-color: rgb(9, 9, 9);
    color: aliceblue;
    transition: 0.2s;
    float: left;
    
}
#main2 #board2 .node{
    width: 74px;
    height: 74px;
    background-color: #F1F3CE;
    margin: 0;
    border: none;
    border: 0px solid;
    text-align: center;
    border-color: rgb(9, 9, 9);
    color: aliceblue;
    transition: 0.2s;
    float: left;
    transform: rotate(180deg);
}
.node:hover{
    opacity: 0.5;
}
.clock{
    text-align: center;
    width: 100%;
    height: 60px;
}
.clock input{
    width: 200px;
    height: 100%;
    background-color: rgba(0, 0, 0, 0);
    border: none;
    font-size: 50px;
    font-family: monospace;
    color: #d4a354;
}
#swap{
    position: absolute;
    right: 48.5vw;
    top: 50vh;
    font-size: 50px;
    color: #d4a354;
    z-index: 1;
    cursor: pointer;
}
#return{
    position: absolute;
    right: 48.5vw;
    top: 60vh;
    font-size: 50px;
    color: #d4a354;
    z-index: 1;
    cursor: pointer;
}
@media (max-width: 1100px) {
    html #main1{
        width: 96vw;
        height: 96vw;
        transform: rotate(90deg);
        position: absolute;
        top: 0.4vh;
        right: 2vw;
        
    }
    #main1 #board1{
        width: 80vw;
        height: 80vw;
        position: absolute;
        margin-inline: 8vw;
    }
    #header{
        display: none;
    }
    #main1 #board1 .node{
        /* width: calc(98.5vw/8);
        height: calc(98.5vw/8); */
        width: calc(10vw - 1px);
        height: calc((10vw - 1px));
        background-color: #F1F3CE;
        margin: 0;
        border: none;
        border: 0px solid;
        text-align: center;
        border-color: rgb(9, 9, 9);
        color: aliceblue;
    }
    html #main2{
        width: 96vw;
        height: 96vw;
        transform: rotate(90deg);
        position: absolute;
        top: calc((100vh - 96vw)/1);
        /* top: 100vw; */
        right: 2vw;
    }
    #main2 #board2{
        width: 80vw;
        height: 80vw;
    }
    #main2 #board2 .node{
        width: calc(10vw - 1px);
        height: calc((10vw - 1px));
        background-color: #F1F3CE;
        margin: 0;
        border: none;
        border: 0px;
        text-align: center;
        border-color: rgb(9, 9, 9);
        color: aliceblue;

    }
    .clock input{
        font-size: 40px;
        width: 150px;
    }
    #swap{
        top: 47vh;
        transform: rotate(90deg);
    }
    #return{
        top: 47vh;
        right: 35vw;
        transform: rotate(90deg);
    }
    .swapp{
        transform: rotate(270deg) !important;
    }
    html{
        background-color: #00293C;
    }
}
.black{
    background-color: #b16e41 !important;
}
.white{
    background-color: #ffd599 !important;
}
.tot_trang{
    background: url(img/tot_trang.png);
    background-size: contain;
}
.xe_trang{
    background: url(img/xe_trang.png);
    background-size: contain;
}
.ma_trang{
    background: url(img/ma_trang.png);
    background-size: contain;
}
.tuong_trang{
    background: url(img/tuong_trang.png);
    background-size: contain;
}
.hau_trang{
    background: url(img/hau_trang.png);
    background-size: contain;
}
.vua_trang{
    background: url(img/vua_trang.png);
    background-size: contain;
    /* transform: rotate(180deg); */
}
.tot_den{
    background: url(img/tot_den.png);
    background-size: contain;
    
}
.xe_den{
    background: url(img/xe_den.png);
    background-size: contain;
}
.ma_den{
    background: url(img/ma_den.png);
    background-size: contain;
}
.tuong_den{
    background: url(img/tuong_den.png);
    background-size: contain;
}
.hau_den{
    background: url(img/hau_den.png);
    background-size: contain;
}
.vua_den{
    background: url(img/vua_den.png);
    background-size: contain;
}
.xanh{
    background-color: #d4a354 !important;
}
.ex{
    background-color: #ad2c2c;
}
.dot{
    position: relative;
    top: 32.5%;
    opacity: 0.5;
    width: 35%;
    height: 35%;
    opacity: 0.5;
    display: none;
}
.reddot{
    position: relative;
    top: 32.5%;
    opacity: 0.5;
    width: 35%;
    height: 35%;
    opacity: 0.5;
    display: none;
}
.Active{
    display: unset;
}

	<script>
	var b =1;
var h=1;
var minute1 = 10;
var second1 = 0;
var time1= document.getElementById("clock1");
var board1 = document.getElementById("board1");
var board2 = document.getElementById("board2");

time1.value = "10:00";
var minute2 = 10;
var second2 = 0;
var mili1=0;
var mili2=0;
var time2= document.getElementById("clock2");
time2.value = "10:00";
function countdown(){
    if(minute1==0 && second1 ==0 && mili1==0){
        clearInterval(timerun2);
        alert("Đen Thắng!!!");
    }
    if(minute2==0 && second2 ==0 && mili2==0){
        clearInterval(timerun2);
        alert("Trắng Thắng!!!");
    }
    if(mili1<0 && second1==0){
        minute1--;
    }
    if(second1<0){
        second1=59;
    }
    if(mili1<0){
        second1--;
    }
    if(mili1<0){
        mili1=9;
    }
    if(mili2<0 && second2==0){
        minute2--;
    }
    if(second2<0){
        second2=59;
    }
    if(mili2<0){
        second2--;
    }
    if(mili2<0){
        mili2=9;
    }
    if(second1>=10){
        time1.value = String(minute1 + ':' + second1 + ':' + mili1);
    }else if(second1<10){
        time1.value = String(minute1 + ':0' + second1 + ':' + mili1);
    }
    if(second2>=10){
        time2.value = String(minute2 + ':' + second2 + ':' + mili2);
    }else if(second2<10){
        time2.value = String(minute2 + ':0' + second2 + ':' + mili2);
    }
    // second2-=1;
    if(luot=='trang'){
        mili1--;
        // board1.style.borderColor = "#04fad9";
        board1.style.borderColor = "#04fad9";
        board2.style.borderColor = "unset";
    }else if(luot=='den'){
        mili2--;
        board2.style.borderColor = "#04fad9";
        board1.style.borderColor = "unset";
    }
}
var timerun2 = setInterval(() => {
    countdown();
  }, 100);
function swap(){
    e = document.getElementById("main1");
    r = document.getElementById("main2");
    w = document.getElementsByClassName('node');
    if(b==1){
        e.classList.add("swapp");
        r.classList.add("swapp");
        b=2
    }else if(b==2){
        e.classList.remove("swapp");
        r.classList.remove("swapp");
        e.classList.add("swappp");
        r.classList.add("swapppp");
        b=3;
    }else{
        e.classList.remove("swappp");
        r.classList.remove("swapppp");
        b=1;
    }
}
var a=1;
for(let i=1;i<=8;i++){
    for(let j=1;j<=8;j++){
        let t = document.getElementById(String(i+','+j));
        let r = document.getElementById(String(i+','+j+ ",1"));
        t.addEventListener("dragover", function(e) {
            e.preventDefault();
            // e.stopPropagation();
        });
        t.addEventListener("drag",function(e){
            this.dra
        })
        r.addEventListener("dragover", function(e) {
            e.preventDefault();
        });
        if(a==1){
            if(j%2==0){
                t.classList.add("black");
                r.classList.add("black");
            }else{
                t.classList.add("white");
                r.classList.add("white");
            }
        }else{
            if(j%2==0){
                t.classList.add("white");
                r.classList.add("white");
            }else{
                t.classList.add("black");
                r.classList.add("black");
            }
        }
    }
    a=-a;
}
var history = [];
for(let i=1;i<=10000;i++){
    history[i]= new Array();
    for(let j=1;j<=8;j++){
        history[i][j]= new Array();
    }
}
var x=[];
    for(let i=1;i<=8;i++){
        x[i]= new Array();
    }
    x[1][1]=5;
    x[1][2]=2;
    x[1][3]=3;
    x[1][4]=9;
    x[1][5]=10;
    x[1][6]=3;
    x[1][7]=2;
    x[1][8]=5;
    for(let i=1;i<=8;i++){
        x[2][i]=1;
    }
    for(let i=3;i<=6;i++){
        for(let j=1;j<=8;j++){
            x[i][j]=0;
        }
    }
    for(let i=1;i<=8;i++){
        x[7][i]=11;
    }
    x[8][1]=15;
    x[8][2]=12;
    x[8][3]=13;
    x[8][4]=19;
    x[8][5]=20;
    x[8][6]=13;
    x[8][7]=12;
    x[8][8]=15;

var m=1;
var d;
var f;
var luot='trang';
for(let i=1;i<=8;i++){
    for(let j=1;j<=8;j++){
        history[1][i][j]=x[i][j];
    }
}
function check(a,b){
    if(luot=='trang'){
        
        if(m==1 && (x[a][b]==0 || x[a][b]<=10)){
            return;
        }
        for(let i=1;i<=8;i++){
            for(let j=1;j<=8;j++){
                checked4(i,j);
                checked3(i,j);
            }
        }
        if(m==-1 && x[a][b]>10 && x[d][f]>10){
            if(a==d && b==f){
                switch(x[a][b]){
                    case 11: tot_trang_off(a,b);
                    return;
                    case 12: ma_trang_off(a,b);
                    return;
                    case 13: tuong_trang_off(a,b);
                    return;
                    case 15: xe_trang_off(a,b);
                    return;
                    case 19: hau_trang_off(a,b);
                    return;
                    case 20: vua_trang_off(a,b);
                    return;
                }
            }else{
                switch(x[a][b]){
                    case 11: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                        case 20: vua_trang_off(d,f);
                                tot_trang_active(a,b);
                                break;
                    }
                    break;
                    case 12: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                        case 20: vua_trang_off(d,f);
                                ma_trang_active(a,b);
                                break;
                    }
                    break;
                    case 13: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                        case 20: vua_trang_off(d,f);
                                tuong_trang_active(a,b);
                                break;
                    }
                    break;
                    case 15: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                xe_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                xe_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                xe_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                xe_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                xe_trang_active(a,b);
                                break;
                        case 20: if((x[8][2]==0 && x[8][3]==0 && x[8][4]==0 && b==1 && a==8) || (x[8][6]==0 && x[8][7]==0 && a==8 && b==8)){
                                    nhapthanh(a,b);
                                }else{
                                    vua_trang_off(d,f);
                                    xe_trang_active(a,b);
                                }
                                break;
                    }
                    break;
                    case 19: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                        case 20: vua_trang_off(d,f);
                                hau_trang_active(a,b);
                                break;
                    }
                    break;
                    case 20: switch(x[d][f]){
                        case 11: tot_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                        case 12: ma_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                        case 13: tuong_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                        case 15: xe_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                        case 19: hau_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                        case 20: vua_trang_off(d,f);
                                vua_trang_active(a,b);
                                break;
                    }
                    break;
                }
            }
            
        }
        if(x[a][b]==11){
            if(m==1){
                tot_trang_active(a,b);
            }
        }
        else if(x[a][b]==0 || x[a][b]<=10){
            if(m==-1 && x[d][f]==11){
                tot_trang_run(a,b);
            }else if(m==-1 && x[d][f]==15){
                xe_trang_run(a,b);
            }else if(m==-1 && x[d][f]==12){
                ma_trang_run(a,b);
            }else if(m==-1 && x[d][f]==13){
                tuong_trang_run(a,b);
            }else if(m==-1 && x[d][f]==19){
                hau_trang_run(a,b);
            }else if(m==-1 && x[d][f]==20){
                vua_trang_run(a,b);
                return;
            }
            let v=chieutuong_trang();
            for(let i=1;i<=8;i++){
                for(let j=1;j<=8;j++){
                    if(v[i][j]==1 && x[i][j]==20){
                        Return();
                    }
                }
    }
        }else if(x[a][b]==15){
            if(m==1){
                xe_trang_active(a,b);
            }
        }else if(x[a][b]==12){
            if(m==1){
                ma_trang_active(a,b);
            }
        }else if(x[a][b]==13){
            if(m==1){
                tuong_trang_active(a,b);
            }
        }else if(x[a][b]==19){
            if(m==1){
                hau_trang_active(a,b);
            }
        }else if(x[a][b]==20){
            if(m==1){
                vua_trang_active(a,b);
            }
        }
        
        for(let i=1;i<=8;i++){
            if(x[1][i]==11){
                let t = document.getElementById(String(1+','+i));
                t.classList.remove("tot_trang");
                t.classList.add("hau_trang");
                let r = document.getElementById(String(1+','+i+',1'));
                r.classList.remove("tot_trang");
                r.classList.add("hau_trang");
                x[1][i]=19;
            }
        }
        let t=chieutuong_den();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if((t[i][j]==1 && x[i][j]==10)){
                check3(i,j);
                if(chieuhet_den()==0){
                    setTimeout( e=>{
                        alert("Trắng Thắng!!!");
                    },500);
                }
            }
        }
    }
    }else if(luot == 'den') {
        if(m==1 && (x[a][b]==0 || x[a][b]>10)){
            return;
        }
        for(let i=1;i<=8;i++){
            for(let j=1;j<=8;j++){
                checked4(i,j);
                checked3(i,j);
            }
        }
        if(m==-1 && x[a][b]>0 && x[a][b]<=10 && x[d][f]>0 && x[d][f]<=10){
            if(a==d && b==f){
                switch(x[a][b]){
                    case 1: tot_den_off(a,b);
                    return;
                    case 2: ma_den_off(a,b);
                    return;
                    case 3: tuong_den_off(a,b);
                    return;
                    case 5: xe_den_off(a,b);
                    return;
                    case 9: hau_den_off(a,b);
                    return;
                    case 10: vua_den_off(a,b);
                    return;
                }
            }else{
                switch(x[a][b]){
                    case 1: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                        case 10: vua_den_off(d,f);
                                tot_den_active(a,b);
                                break;
                    }
                    break;
                    case 2: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                        case 10: vua_den_off(d,f);
                                ma_den_active(a,b);
                                break;
                    }
                    break;
                    case 3: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                        case 10: vua_den_off(d,f);
                                tuong_den_active(a,b);
                                break;
                    }
                    break;
                    case 5: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                xe_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                xe_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                xe_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                xe_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                xe_den_active(a,b);
                                break;
                        case 10: 
                                if((x[1][2]==0 && x[1][3]==0 && x[1][4]==0 && b==1 && a==1) || (x[1][6]==0 && x[1][7]==0 && a==1 && b==8)){
                                    nhapthanh(a,b);
                                }else{
                                    vua_den_off(d,f);
                                    xe_den_active(a,b);
                                }
                                break;
                    }
                    break;
                    case 9: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                        case 10: vua_den_off(d,f);
                                hau_den_active(a,b);
                                break;
                    }
                    break;
                    case 10: switch(x[d][f]){
                        case 1: tot_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                        case 2: ma_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                        case 3: tuong_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                        case 5: xe_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                        case 9: hau_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                        case 10: vua_den_off(d,f);
                                vua_den_active(a,b);
                                break;
                    }
                    break;
                }
            }
            
        }
        if(x[a][b]==1){
            if(m==1){
                tot_den_active(a,b);
            }
        }
        else if(x[a][b]==0 || x[a][b]>10){
            if(m==-1 && x[d][f]==1){
                tot_den_run(a,b);
            }else if(m==-1 && x[d][f]==5){
                xe_den_run(a,b);
            }else if(m==-1 && x[d][f]==2){
                ma_den_run(a,b);
            }else if(m==-1 && x[d][f]==3){
                tuong_den_run(a,b);
            }else if(m==-1 && x[d][f]==9){
                hau_den_run(a,b);
            }else if(m==-1 && x[d][f]==10){
                vua_den_run(a,b);
                return;
            }
            let v=chieutuong_den();
            for(let i=1;i<=8;i++){
                for(let j=1;j<=8;j++){
                    if(v[i][j]==1 && x[i][j]==10){
                        Return();
                    }
                }
            }
        }else if(x[a][b]==5){
            if(m==1){
                xe_den_active(a,b);
            }
        }else if(x[a][b]==2){
            if(m==1){
                ma_den_active(a,b);
            }
        }else if(x[a][b]==3){
            if(m==1){
                tuong_den_active(a,b);
            }
        }else if(x[a][b]==9){
            if(m==1){
                hau_den_active(a,b);
            }
        }else if(x[a][b]==10){
            if(m==1){
                vua_den_active(a,b);
            }
        }
        
        for(let i=1;i<=8;i++){
            if(x[8][i]==1){
                let t = document.getElementById(String(8+','+i));
                t.classList.remove("tot_den");
                t.classList.add("hau_den");
                let r = document.getElementById(String(8+','+i+',1'));
                r.classList.remove("tot_den");
                r.classList.add("hau_den");
                x[8][i]=9;
            }
        }
    let v=chieutuong_trang();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(v[i][j]==1 && x[i][j]==20){
                check3(i,j);
                if(chieuhet_trang()==0){
                    setTimeout( e=>{
                        alert("Đen Thắng!!!");
                    },500);
                }
            }
        }
    }
    }
    
}
function check2(b,c){
    let y= document.getElementById(String(b+','+c)).querySelector('.dot');
    y.classList.add("Active");
    let t= document.getElementById(String(b+','+c+',1')).querySelector('.dot');
    t.classList.add("Active");
}
function check3(b,c){
    let y= document.getElementById(String(b+','+c)).querySelector('.reddot');
    y.classList.add("Active");
    let t= document.getElementById(String(b+','+c+',1')).querySelector('.reddot');
    t.classList.add("Active");
}
function check4(b,c){
    let y= document.getElementById(String(b+','+c));
    y.classList.add("xanh");
    let t= document.getElementById(String(b+','+c+',1'));
    t.classList.add("xanh");
}
function checked2(b,c){
    let y= document.getElementById(String(b+','+c)).querySelector('.dot');
    y.classList.remove("Active");
    let t= document.getElementById(String(b+','+c+',1')).querySelector('.dot');
    t.classList.remove("Active");
}
function checked3(b,c){
    let y= document.getElementById(String(b+','+c)).querySelector('.reddot');
    y.classList.remove("Active");
    let t= document.getElementById(String(b+','+c+',1')).querySelector('.reddot');
    t.classList.remove("Active");
}
function checked4(b,c){
    let y= document.getElementById(String(b+','+c));
    y.classList.remove("xanh");
    let t= document.getElementById(String(b+','+c+',1'));
    t.classList.remove("xanh");
}
function anquan_den(a,b,d,f,s){
    switch(x[a][b]){
        case 0: let t0 = document.getElementById(String(a+','+b));
                let y0 = document.getElementById(String(d+','+f));
                t0.classList.add(s);
                y0.classList.remove(s);
                let r0 = document.getElementById(String(a+','+b+',1'));
                let e0 = document.getElementById(String(d+','+f+',1'));
                r0.classList.add(s);
                e0.classList.remove(s);
                break;
        case 1: let t11 = document.getElementById(String(a+','+b));
                let y11 = document.getElementById(String(d+','+f));
                t11.classList.remove("tot_den");
                t11.classList.add(s);
                y11.classList.remove(s);
                let r11 = document.getElementById(String(a+','+b+',1'));
                let e11 = document.getElementById(String(d+','+f+',1'));
                r11.classList.remove("tot_den");
                r11.classList.add(s);
                e11.classList.remove(s);
                break;
        case 5: let t15 = document.getElementById(String(a+','+b));
                let y15 = document.getElementById(String(d+','+f));
                t15.classList.remove("xe_den");
                t15.classList.add(s);
                y15.classList.remove(s);
                let r15 = document.getElementById(String(a+','+b+',1'));
                let e15 = document.getElementById(String(d+','+f+',1'));
                r15.classList.remove("xe_den");
                r15.classList.add(s);
                e15.classList.remove(s);
                break;
        case 2: let t12 = document.getElementById(String(a+','+b));
                let y12 = document.getElementById(String(d+','+f));
                t12.classList.remove("ma_den");
                t12.classList.add(s);
                y12.classList.remove(s);
                let r12 = document.getElementById(String(a+','+b+',1'));
                let e12 = document.getElementById(String(d+','+f+',1'));
                r12.classList.remove("ma_den");
                r12.classList.add(s);
                e12.classList.remove(s);
                break;
        case 3: let t13 = document.getElementById(String(a+','+b));
                let y13 = document.getElementById(String(d+','+f));
                t13.classList.remove("tuong_den");
                t13.classList.add(s);
                y13.classList.remove(s);
                let r13 = document.getElementById(String(a+','+b+',1'));
                let e13 = document.getElementById(String(d+','+f+',1'));
                r13.classList.remove("tuong_den");
                r13.classList.add(s);
                e13.classList.remove(s);
                break;
        case 9: let t19 = document.getElementById(String(a+','+b));
                let y19 = document.getElementById(String(d+','+f));
                t19.classList.remove("hau_den");
                t19.classList.add(s);
                y19.classList.remove(s);
                let r19 = document.getElementById(String(a+','+b+',1'));
                let e19 = document.getElementById(String(d+','+f+',1'));
                r19.classList.remove("hau_den");
                r19.classList.add(s);
                e19.classList.remove(s);
                break;
        case 10: let t20 = document.getElementById(String(a+','+b));
                let y20 = document.getElementById(String(d+','+f));
                t20.classList.remove("vua_den");
                t20.classList.add(s);
                y20.classList.remove(s);
                let r20 = document.getElementById(String(a+','+b+',1'));
                let e20 = document.getElementById(String(d+','+f+',1'));
                r20.classList.remove("vua_den");
                r20.classList.add(s);
                e20.classList.remove(s);
                break;
    }
    x[a][b]=x[d][f];
    x[d][f]=0;
    check4(d,f);
    check4(a,b);
    h++;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            history[h][i][j]=x[i][j];
        }
    }
}
function anquan_trang(a,b,d,f,s){
    switch(x[a][b]){
        case 0: let t0 = document.getElementById(String(a+','+b));
                let y0 = document.getElementById(String(d+','+f));
                t0.classList.add(s);
                y0.classList.remove(s);
                let r0 = document.getElementById(String(a+','+b+',1'));
                let e0 = document.getElementById(String(d+','+f+',1'));
                r0.classList.add(s);
                e0.classList.remove(s);
                break;
        case 11: let t11 = document.getElementById(String(a+','+b));
                let y11 = document.getElementById(String(d+','+f));
                t11.classList.remove("tot_trang");
                t11.classList.add(s);
                y11.classList.remove(s);
                let r11 = document.getElementById(String(a+','+b+',1'));
                let e11 = document.getElementById(String(d+','+f+',1'));
                r11.classList.remove("tot_trang");
                r11.classList.add(s);
                e11.classList.remove(s);
                break;
        case 15: let t15 = document.getElementById(String(a+','+b));
                let y15 = document.getElementById(String(d+','+f));
                t15.classList.remove("xe_trang");
                t15.classList.add(s);
                y15.classList.remove(s);
                let r15 = document.getElementById(String(a+','+b+',1'));
                let e15 = document.getElementById(String(d+','+f+',1'));
                r15.classList.remove("xe_trang");
                r15.classList.add(s);
                e15.classList.remove(s);
                break;
        case 12: let t12 = document.getElementById(String(a+','+b));
                let y12 = document.getElementById(String(d+','+f));
                t12.classList.remove("ma_trang");
                t12.classList.add(s);
                y12.classList.remove(s);
                let r12 = document.getElementById(String(a+','+b+',1'));
                let e12 = document.getElementById(String(d+','+f+',1'));
                r12.classList.remove("ma_trang");
                r12.classList.add(s);
                e12.classList.remove(s);
                break;
        case 13: let t13 = document.getElementById(String(a+','+b));
                let y13 = document.getElementById(String(d+','+f));
                t13.classList.remove("tuong_trang");
                t13.classList.add(s);
                y13.classList.remove(s);
                let r13 = document.getElementById(String(a+','+b+',1'));
                let e13 = document.getElementById(String(d+','+f+',1'));
                r13.classList.remove("tuong_trang");
                r13.classList.add(s);
                e13.classList.remove(s);
                break;
        case 19: let t19 = document.getElementById(String(a+','+b));
                let y19 = document.getElementById(String(d+','+f));
                t19.classList.remove("hau_trang");
                t19.classList.add(s);
                y19.classList.remove(s);
                let r19 = document.getElementById(String(a+','+b+',1'));
                let e19 = document.getElementById(String(d+','+f+',1'));
                r19.classList.remove("hau_trang");
                r19.classList.add(s);
                e19.classList.remove(s);
                break;
    }
    x[a][b]=x[d][f];
    x[d][f]=0;
    check4(d,f);
    check4(a,b);
    h++;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            history[h][i][j]=x[i][j];
        }
    }
}
function tot_den_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(a==2 && ((i==a+1 && j==b) || (i==a+2 && j==b))){
                    check2(i,j);
                }else if(a!=2 && i==a+1 && j==b){
                    check2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a+1 && j==b-1)||(i==a+1 && j==b+1)){
                    check3(i,j);
                }
            }
        }
    }
    m=-1;
    d=a;
    f=b;
}
function tot_den_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(a==2 && ((i==a+1 && j==b) || (i==a+2 && j==b))){
                    checked2(i,j);
                }else if(a!=2 && i==a+1 && j==b){
                    checked2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a+1 && j==b-1)||(i==a+1 && j==b+1)){
                    checked3(i,j);
                }
            }
        }
    }
        m=-m;
}
function tot_den_run(a,b){
    let tot = [];
    let p=1;
    let o=0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(d==2 && ((i==d+1 && j==f) || (i==d+2 && j==f))){
                    tot[p] = String(i+'.'+j);
                    p++;
                }else if(d!=2 && i==d+1 && j==f){
                    tot[p] = String(i+'.'+j);
                    p++;
                }
            }else if(x[i][j]>10){
                if((i==d+1 && j==f-1)||(i==d+1 && j==f+1)){
                    tot[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=tot.length;i++){
        if(String(a+'.'+b)==tot[i]){
            tot_den_off(d,f);
            anquan_trang(a,b,d,f,"tot_den")
            d=0;
            f=0;
            luot='trang';
            o=1;
            break;
        }
    }
    if(o==0){
        tot_den_off(d,f);
    }
}
function xe_den_active(a,b){
    check2(a,b);
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]>10){
            check3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]>10){
            check3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]>10){
            check3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]>10){
            check3(a,i);
        }
        break;
    }
    m=-m;
    d=a;
    f=b;
}
function xe_den_off(a,b){
    checked2(a,b);
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]>10){
            checked3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]>10){
            checked3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]>10){
            checked3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]>10){
            checked3(a,i);
        }
        break;
    }
    m=-m;
}
function xe_den_run(a,b){
    let xe = [];
    let p = 1;
    let o = 0;
    for(let i=d-1;i>=1;i--){
        if(x[i][f]==0){
            xe[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]>10){
            xe[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=d+1;i<=8;i++){
        if(x[i][f]==0){
            xe[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]>10){
            xe[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=f-1;i>=1;i--){
        if(x[d][i]==0){
            xe[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]>10){
            xe[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=f+1;i<=8;i++){
        if(x[d][i]==0){
            xe[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]>10){
            xe[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=1;i<=xe.length;i++){
        if(String(a+'.'+b)==xe[i]){
            xe_den_off(d,f);
            anquan_trang(a,b,d,f,"xe_den")
            d=0;f=0;
            o=1;
            luot='trang';
            break;
        }
    }
    if(o==0){
            xe_den_off(d,f);
    }
    
}
function ma_den_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    check2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    check3(i,j);
                }
            }
        }
    }
    m=-1;
    d=a;
    f=b;
}
function ma_den_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    checked2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    checked3(i,j);
                }
            }
        }
    }
    m=-m;
}
function ma_den_run(a,b){
    let ma = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0 || x[i][j]>10){
                if((i==d-1 && j==f-2)||(i==d+1 && j==f-2)||(i==d+2 && j==f-1)||(i==d+2 && j==f+1)||(i==d+1 && j==f+2)||(i==d-1 && j==f+2)||(i==d-2 && j==f+1)||(i==d-2 && j==f-1)){
                    ma[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=ma.length;i++){
        if(String(a+'.'+b)==ma[i]){
            ma_den_off(d,f);
            anquan_trang(a,b,d,f,"ma_den")
            d=0;f=0;
            o=1;
            luot='trang';
            break;
        }
    }
    if(o==0){
        ma_den_off(d,f);
    }
}
function tuong_den_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                check2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]>10){
                check3(a-i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                check2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]>10){
                check3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                check2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]>10){
                check3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                check2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]>10){
                check3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
    d=a;
    f=b;

}
function tuong_den_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                checked2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]>10){
                checked3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                checked2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]>10){
                checked3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                checked2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]>10){
                checked3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                checked2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]>10){
                checked3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;

}
function tuong_den_run(a,b){
    let tuong = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        if(d-i>0 && f-i>0){
            if(x[d-i][f-i]==0){
                tuong[p]=String((d-i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d-i][f-i]>10){
                tuong[p]=String((d-i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f+i<=8){
            if(x[d+i][f+i]==0){
                tuong[p]=String((d+i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d+i][f+i]>10){
                tuong[p]=String((d+i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d-i>0 && f+i<=8){
            if(x[d-i][f+i]==0){
                tuong[p]=String((d-i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d-i][f+i]>10){
                tuong[p]=String((d-i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f-i>0){
            if(x[d+i][f-i]==0){
                tuong[p]=String((d+i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d+i][f-i]>10){
                tuong[p]=String((d+i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=tuong.length;i++){
        if(String(a+'.'+b)==tuong[i]){
            tuong_den_off(d,f);
            anquan_trang(a,b,d,f,"tuong_den")
            d=0;f=0;
            o=1;
            luot='trang';
            break;
        }
    }
    if(o==0){
        tuong_den_off(d,f);
    }

}

function hau_den_active(a,b){
    check2(a,b);
    // xe
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]>10){
            check3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]>10){
            check3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]>10){
            check3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]>10){
            check3(a,i);
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                check2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]>10){
                check3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                check2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]>10){
                check3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                check2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]>10){
                check3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                check2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]>10){
                check3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
    d=a;
    f=b;
}
function hau_den_off(a,b){
    checked2(a,b);
    // xe
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]>10){
            checked3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]>10){
            checked3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]>10){
            checked3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]>10){
            checked3(a,i);
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                checked2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]>10){
                checked3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                checked2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]>10){
                checked3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                checked2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]>10){
                checked3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                checked2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]>10){
                checked3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
}
function hau_den_run(a,b){
    let hau = [];
    let p = 1;
    let o = 0;
    // xe
    for(let i=d-1;i>=1;i--){
        if(x[i][f]==0){
            hau[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]>10){
            hau[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=d+1;i<=8;i++){
        if(x[i][f]==0){
            hau[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]>10){
            hau[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=f-1;i>=1;i--){
        if(x[d][i]==0){
            hau[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]>10){
            hau[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=f+1;i<=8;i++){
        if(x[d][i]==0){
            hau[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]>10){
            hau[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(d-i>0 && f-i>0){
            if(x[d-i][f-i]==0){
                hau[p]=String((d-i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d-i][f-i]>10){
                hau[p]=String((d-i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f+i<=8){
            if(x[d+i][f+i]==0){
                hau[p]=String((d+i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d+i][f+i]>10){
                hau[p]=String((d+i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d-i>0 && f+i<=8){
            if(x[d-i][f+i]==0){
                hau[p]=String((d-i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d-i][f+i]>10){
                hau[p]=String((d-i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f-i>0){
            if(x[d+i][f-i]==0){
                hau[p]=String((d+i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d+i][f-i]>10){
                hau[p]=String((d+i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break;
        }
    }

    for(let i=1;i<=hau.length;i++){
        if(String(a+'.'+b)==hau[i]){
            hau_den_off(d,f);
            anquan_trang(a,b,d,f,"hau_den")
            d=0;f=0;
            o=1;
            luot='trang';
            break;
        }
    }
    if(o==0){
            hau_den_off(d,f);
    }
}
function vua_den_active(a,b){
    check2(a,b);
    let u=chieutuong_den();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0 && u[i][j]!=1){ 
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    check2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    check3(i,j);
                }
            }
        }
    }
    if(a==1 && b==5 && x[1][1]==5 && x[1][2]==0 && x[1][3]==0 && x[1][4]==0){
        check3(1,1);
    }
    if(a==1 && b==5 && x[1][8]==5 && x[1][6]==0 && x[1][7]==0){
        check3(1,8);
    }
    m=-1;
    d=a;
    f=b;
}
function vua_den_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    checked2(i,j);
                }
            }else if(x[i][j]>10){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    checked3(i,j);
                }
            }
        }
    }
    if(a==1 && b==5 && x[1][1]==5 && x[1][2]==0 && x[1][3]==0 && x[1][4]==0){
        checked3(1,1);
    }
    if(a==1 && b==5 && x[1][8]==5 && x[1][6]==0 && x[1][7]==0){
        checked3(1,8);
    }
    m=-m;
}
function vua_den_run(a,b){
    let u= chieutuong_den();
    let vua = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if((x[i][j]==0 || x[i][j]>10) && u[i][j]!=1){
                if((i==d-1 && j==f-1)||(i==d && j==f-1)||(i==d+1 && j==f-1)||(i==d+1 && j==f)||(i==d+1 && j==f+1)||(i==d && j==f+1)||(i==d-1 && j==f+1)||(i==d-1 && j==f)){
                    vua[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=vua.length;i++){
        if(String(a+'.'+b)==vua[i]){
            vua_den_off(d,f);
            anquan_trang(a,b,d,f,"vua_den")
            d=0;f=0;
            o=1;
            luot='trang';
            break;
        }
    }
    if(o==0){
        vua_den_off(d,f);
    }
}
// TRANG


function tot_trang_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(a==7 && ((i==a-1 && j==b) || (i==a-2 && j==b))){
                    check2(i,j);
                }else if(a!=7 && i==a-1 && j==b){
                    check2(i,j);
                }
            }else if(x[i][j]<=10){
                if((i==a-1 && j==b-1)||(i==a-1 && j==b+1)){
                    check3(i,j);
                }
            }
        }
    }
    m=-1;
    d=a;
    f=b;
}
function tot_trang_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(a==7 && ((i==a-1 && j==b) || (i==a-2 && j==b))){
                    checked2(i,j);
                }else if(a!=7 && i==a-1 && j==b){
                    checked2(i,j);
                }
            }else if(x[i][j]<=10){
                if((i==a-1 && j==b-1)||(i==a-1 && j==b+1)){
                    checked3(i,j);
                }
            }
        }
    }
    m=-m;
}
function tot_trang_run(a,b){
    let tot = [];
    let p=1;
    let o=0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if(d==7 && ((i==d-1 && j==f) || (i==d-2 && j==f))){
                    tot[p] = String(i+'.'+j);
                    p++;
                }else if(d!=7 && i==d-1 && j==f){
                    tot[p] = String(i+'.'+j);
                    p++;
                }
            }else if(x[i][j]<=10){
                if((i==d-1 && j==f-1)||(i==d-1 && j==f+1)){
                    tot[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=tot.length;i++){
        if(String(a+'.'+b)==tot[i]){
            tot_trang_off(d,f);
            anquan_den(a,b,d,f,"tot_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
        tot_trang_off(d,f);
    }
}
function xe_trang_active(a,b){
    check2(a,b);
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]<=10){
            check3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]<=10){
            check3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]<=10){
            check3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]<=10){
            check3(a,i);
        }
        break;
    }
    m=-m;
    d=a;
    f=b;
}
function xe_trang_off(a,b){
    checked2(a,b);
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]<=10){
            checked3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]<=10){
            checked3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]<=10){
            checked3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]<=10){
            checked3(a,i);
        }
        break;
    }
    m=-m;
}
function xe_trang_run(a,b){
    let xe = [];
    let p = 1;
    let o = 0;
    for(let i=d-1;i>=1;i--){
        if(x[i][f]==0){
            xe[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]<=10){
            xe[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=d+1;i<=8;i++){
        if(x[i][f]==0){
            xe[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]<=10){
            xe[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=f-1;i>=1;i--){
        if(x[d][i]==0){
            xe[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]<=10){
            xe[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=f+1;i<=8;i++){
        if(x[d][i]==0){
            xe[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]<=10){
            xe[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=1;i<=xe.length;i++){
        if(String(a+'.'+b)==xe[i]){
            xe_trang_off(d,f);
            anquan_den(a,b,d,f,"xe_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
            xe_trang_off(d,f);
    }
}
function ma_trang_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    check2(i,j);
                }
            }else if(x[i][j]<=10){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    check3(i,j);
                }
            }
        }
    }
    m=-1;
    d=a;
    f=b;
}
function ma_trang_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    checked2(i,j);
                }
            }else if(x[i][j]<=10){
                if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                    checked3(i,j);
                }
            }
        }
    }
    m=-m;
}
function ma_trang_run(a,b){
    let ma = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0 || x[i][j]<=10){
                if((i==d-1 && j==f-2)||(i==d+1 && j==f-2)||(i==d+2 && j==f-1)||(i==d+2 && j==f+1)||(i==d+1 && j==f+2)||(i==d-1 && j==f+2)||(i==d-2 && j==f+1)||(i==d-2 && j==f-1)){
                    ma[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=ma.length;i++){
        if(String(a+'.'+b)==ma[i]){
            ma_trang_off(d,f);
            anquan_den(a,b,d,f,"ma_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
        ma_trang_off(d,f);
    }
}
function tuong_trang_active(a,b){
    check2(a,b);
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                check2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]<=10){
                check3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                check2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]<=10){
                check3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                check2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]<=10){
                check3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                check2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]<=10){
                check3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
    d=a;
    f=b;

}
function tuong_trang_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                checked2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]<=10){
                checked3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                checked2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]<=10){
                checked3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                checked2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]<=10){
                checked3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                checked2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]<=10){
                checked3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
}
function tuong_trang_run(a,b){
    let tuong = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        if(d-i>0 && f-i>0){
            if(x[d-i][f-i]==0){
                tuong[p]=String((d-i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d-i][f-i]<=10){
                tuong[p]=String((d-i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f+i<=8){
            if(x[d+i][f+i]==0){
                tuong[p]=String((d+i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d+i][f+i]<=10){
                tuong[p]=String((d+i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d-i>0 && f+i<=8){
            if(x[d-i][f+i]==0){
                tuong[p]=String((d-i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d-i][f+i]<=10){
                tuong[p]=String((d-i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f-i>0){
            if(x[d+i][f-i]==0){
                tuong[p]=String((d+i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d+i][f-i]<=10){
                tuong[p]=String((d+i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=tuong.length;i++){
        if(String(a+'.'+b)==tuong[i]){
            tuong_trang_off(d,f);
            anquan_den(a,b,d,f,"tuong_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
        tuong_trang_off(d,f);
    }
}
function hau_trang_active(a,b){
    check2(a,b);
    // xe
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]<=10){
            check3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            check2(i,b);
            continue;
        }else if(x[i][b]<=10){
            check3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]<=10){
            check3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            check2(a,i);
            continue;
        }else if(x[a][i]<=10){
            check3(a,i);
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                check2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]<=10){
                check3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                check2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]<=10){
                check3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                check2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]<=10){
                check3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                check2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]<=10){
                check3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
    d=a;
    f=b;
}
function hau_trang_off(a,b){
    checked2(a,b);
    // xe
    for(let i=a-1;i>=1;i--){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]<=10){
            checked3(i,b);
        }
        break;
    }
    for(let i=a+1;i<=8;i++){
        if(x[i][b]==0){
            checked2(i,b);
            continue;
        }else if(x[i][b]<=10){
            checked3(i,b);
        }
        break;
    }
    for(let i=b-1;i>=1;i--){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]<=10){
            checked3(a,i);
        }
        break;
    }
    for(let i=b+1;i<=8;i++){
        if(x[a][i]==0){
            checked2(a,i);
            continue;
        }else if(x[a][i]<=10){
            checked3(a,i);
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(a-i>0 && b-i>0){
            if(x[a-i][b-i]==0){
                checked2(a-i,b-i);
                continue;
            }else if(x[a-i][b-i]<=10){
                checked3(a-i,b-i);
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b+i<=8){
            if(x[a+i][b+i]==0){
                checked2(a+i,b+i);
                continue;
            }else if(x[a+i][b+i]<=10){
                checked3(a+i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a-i>0 && b+i<=8){
            if(x[a-i][b+i]==0){
                checked2(a-i,b+i);
                continue;
            }else if(x[a-i][b+i]<=10){
                checked3(a-i,b+i);
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(a+i<=8 && b-i>0){
            if(x[a+i][b-i]==0){
                checked2(a+i,b-i);
                continue;
            }else if(x[a+i][b-i]<=10){
                checked3(a+i,b-i);
            }
            break;
        }else{
            break;
        }
    }
    m=-m;
}
function hau_trang_run(a,b){
    let hau = [];
    let p = 1;
    let o = 0;
    // xe
    for(let i=d-1;i>=1;i--){
        if(x[i][f]==0){
            hau[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]<=10){
            hau[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=d+1;i<=8;i++){
        if(x[i][f]==0){
            hau[p]=String(i+'.'+f);
            p++;
            continue;
        }else if(x[i][f]<=10){
            hau[p]=String(i+'.'+f);
            p++;
        }
        break;
    }
    for(let i=f-1;i>=1;i--){
        if(x[d][i]==0){
            hau[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]<=10){
            hau[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    for(let i=f+1;i<=8;i++){
        if(x[d][i]==0){
            hau[p]=String(d+'.'+i);
            p++;
            continue;
        }else if(x[d][i]<=10){
            hau[p]=String(d+'.'+i);
            p++;
        }
        break;
    }
    // tuong
    for(let i=1;i<=8;i++){
        if(d-i>0 && f-i>0){
            if(x[d-i][f-i]==0){
                hau[p]=String((d-i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d-i][f-i]<=10){
                hau[p]=String((d-i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f+i<=8){
            if(x[d+i][f+i]==0){
                hau[p]=String((d+i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d+i][f+i]<=10){
                hau[p]=String((d+i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d-i>0 && f+i<=8){
            if(x[d-i][f+i]==0){
                hau[p]=String((d-i)+'.'+(f+i));
                p++;
                continue;
            }else if(x[d-i][f+i]<=10){
                hau[p]=String((d-i)+'.'+(f+i));
                p++;
            }
            break;
        }else{
            break;
        }
    }
    for(let i=1;i<=8;i++){
        if(d+i<=8 && f-i>0){
            if(x[d+i][f-i]==0){
                hau[p]=String((d+i)+'.'+(f-i));
                p++;
                continue;
            }else if(x[d+i][f-i]<=10){
                hau[p]=String((d+i)+'.'+(f-i));
                p++;
            }
            break;
        }else{
            break;
        }
    }

    for(let i=1;i<=hau.length;i++){
        if(String(a+'.'+b)==hau[i]){
            hau_trang_off(d,f);
            anquan_den(a,b,d,f,"hau_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
            hau_trang_off(d,f);
    }
}
function vua_trang_active(a,b){
    check2(a,b);
    let u=chieutuong_trang();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0 && u[i][j]!=1){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    check2(i,j);
                }
            }else if(x[i][j]<=10 && x[i][j]>0){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    check3(i,j);
                }
            }
        }
    }
    if(a==8 && b==5 && x[8][1]==15 && x[8][2]==0 && x[8][3]==0 && x[8][4]==0){
        check3(8,1);
    }
    if(a==8 && b==5 && x[8][8]==15 && x[8][6]==0 && x[8][7]==0){
        check3(8,8);
    }
    
    m=-1;
    d=a;
    f=b;
}
function vua_trang_off(a,b){
    checked2(a,b);
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==0){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    checked2(i,j);
                }
            }else if(x[i][j]<=10){
                if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
                    checked3(i,j);
                }
            }
        }
    }
    if(a==8 && b==5 && x[8][1]==15 && x[8][2]==0 && x[8][3]==0 && x[8][4]==0){
        checked3(8,1);
    }
    if(a==8 && b==5 && x[8][8]==15 && x[8][6]==0 && x[8][7]==0){
        checked3(8,8);
    }
    m=-m;
}
function vua_trang_run(a,b){
    let u=chieutuong_trang();
    let vua = [];
    let p = 1;
    let o = 0;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if((x[i][j]==0 || x[i][j]<=10)&& u[i][j]!=1){
                if((i==d-1 && j==f-1)||(i==d && j==f-1)||(i==d+1 && j==f-1)||(i==d+1 && j==f)||(i==d+1 && j==f+1)||(i==d && j==f+1)||(i==d-1 && j==f+1)||(i==d-1 && j==f)){
                    vua[p] = String(i+'.'+j);
                    p++;
                }
            }
        }
    }
    for(let i=1;i<=vua.length;i++){
        if(String(a+'.'+b)==vua[i]){
            vua_trang_off(d,f);
            anquan_den(a,b,d,f,"vua_trang");
            d=0;f=0;
            o=1;
            luot = 'den';
            break;
        }
    }
    if(o==0){
        vua_trang_off(d,f);
    }
}
function nhapthanh(a,b){
    if(d==1 && f==5 && a==1 && b==1){
        let t15 = document.getElementById("1,1");
                let y15 = document.getElementById("1,5");
                let w15 = document.getElementById("1,3");
                let q15 = document.getElementById("1,4");
                t15.classList.remove("xe_den");
                y15.classList.remove("vua_den");
                w15.classList.add("vua_den");
                q15.classList.add("xe_den");
                let T15 = document.getElementById("1,1,1");
                let Y15 = document.getElementById("1,5,1");
                let W15 = document.getElementById("1,3,1");
                let Q15 = document.getElementById("1,4,1");
                T15.classList.remove("xe_den");
                Y15.classList.remove("vua_den");
                W15.classList.add("vua_den");
                Q15.classList.add("xe_den");
                vua_den_off(d,f);
                x[1][3]=10;
                x[1][4]=5;
                x[1][1]=0;
                x[1][5]=0;
                luot='trang';
    }else if(d==1 && f==5 && a==1 && b==8){
        let t15 = document.getElementById("1,8");
                let y15 = document.getElementById("1,5");
                let w15 = document.getElementById("1,7");
                let q15 = document.getElementById("1,6");
                t15.classList.remove("xe_den");
                y15.classList.remove("vua_den");
                w15.classList.add("vua_den");
                q15.classList.add("xe_den");
                let T15 = document.getElementById("1,8,1");
                let Y15 = document.getElementById("1,5,1");
                let W15 = document.getElementById("1,7,1");
                let Q15 = document.getElementById("1,6,1");
                T15.classList.remove("xe_den");
                Y15.classList.remove("vua_den");
                W15.classList.add("vua_den");
                Q15.classList.add("xe_den");
                vua_den_off(d,f);
                x[1][7]=10;
                x[1][6]=5;
                x[1][5]=0;
                x[1][8]=0;
                luot='trang';
    }
    else if(d==8 && f==5 && a==8 && b==8){
        let t15 = document.getElementById("8,8");
                let y15 = document.getElementById("8,5");
                let w15 = document.getElementById("8,7");
                let q15 = document.getElementById("8,6");
                t15.classList.remove("xe_trang");
                y15.classList.remove("vua_trang");
                w15.classList.add("vua_trang");
                q15.classList.add("xe_trang");
                let T15 = document.getElementById("8,8,1");
                let Y15 = document.getElementById("8,5,1");
                let W15 = document.getElementById("8,7,1");
                let Q15 = document.getElementById("8,6,1");
                T15.classList.remove("xe_trang");
                Y15.classList.remove("vua_trang");
                W15.classList.add("vua_trang");
                Q15.classList.add("xe_trang");
                vua_trang_off(d,f);
                x[8][7]=20;
                x[8][6]=15;
                x[8][5]=0;
                x[8][8]=0;
                 luot='den';
    }else if(d==8 && f==5 && a==8 && b==1){
        let t15 = document.getElementById("8,1");
                let y15 = document.getElementById("8,5");
                let w15 = document.getElementById("8,3");
                let q15 = document.getElementById("8,4");
                t15.classList.remove("xe_trang");
                y15.classList.remove("vua_trang");
                w15.classList.add("vua_trang");
                q15.classList.add("xe_trang");
                let T15 = document.getElementById("8,1,1");
                let Y15 = document.getElementById("8,5,1");
                let W15 = document.getElementById("8,3,1");
                let Q15 = document.getElementById("8,4,1");
                T15.classList.remove("xe_trang");
                Y15.classList.remove("vua_trang");
                W15.classList.add("vua_trang");
                Q15.classList.add("xe_trang");
                vua_trang_off(d,f);
                x[8][3]=20;
                x[8][4]=15;
                x[8][1]=0;
                x[8][5]=0;
                 luot='den';
    }
    d=0;
    f=0;
    h++;
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            history[h][i][j]=x[i][j];
        }
    }
    
}
function chieutuong_trang(){
    var u=[];
    for(let i=1;i<=8;i++){
        u[i]= new Array();
    }
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==1){
                u[i+1][j-1]=1;
                u[i+1][j+1]=1;
            }else if(x[i][j]==5){
                for(let k=i-1;k>=1;k--){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else if(x[k][j]<10){
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=i+1;k<=8;k++){
                    if(x[k][j]==0  || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else if(x[k][j]<10){
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=j-1;k>=1;k--){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else if(x[i][k]<10){
                        u[i][k]=1;
                    }
                    break;
                }
                for(let k=j+1;k<=8;k++){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else if(x[i][k]<10){
                        u[i][k]=1;
                    }
                    break;
                }
            }else if(x[i][j]==2){
                for(let k=1;k<=8;k++){
                    for(let l=1;l<=8;l++){
                        if(x[k][l]==0 || x[k][l]==20 || x[k][l]<10){
                            if((k==i-1 && l==j-2)||(k==i+1 && l==j-2)||(k==i+2 && l==j-1)||(k==i+2 && l==j+1)||(k==i+1 && l==j+2)||(k==i-1 && l==j+2)||(k==i-2 && l==j+1)||(k==i-2 && l==j-1)){
                                u[k][l]=1;
                            }
                        }
                    }
                }
            }else if(x[i][j]==3){
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j-k>0){
                        if(x[i-k][j-k]==0 || x[i-k][j-k]==20){
                            u[i-k][j-k]=1;
                            continue;
                        }else if(x[i-k][j-k]<10){
                            u[i-k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j+k<=8){
                        if(x[i+k][j+k]==0 || x[i+k][j+k]==20){
                            u[i+k][j+k]=1;
                            continue;
                        }else if(x[i+k][j+k]<10){
                            u[i+k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j+k<=8){
                        if(x[i-k][j+k]==0 || x[i-k][j+k]==20){
                            u[i-k][j+k]=1;
                            continue;
                        }else if(x[i-k][j+k] <10 ){
                            u[i-k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j-k>0){
                        if(x[i+k][j-k]==0 || x[i+k][j-k]==20){
                            u[i+k][j-k]=1;
                            continue;
                        }else if(x[i+k][j-k]<10 ){
                            u[i+k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[i][j]==9){
                for(let k=i-1;k>=1;k--){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else if(x[k][j]<10 ){
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=i+1;k<=8;k++){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else if(x[k][j]<10 ){
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=j-1;k>=1;k--){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else if(x[i][k]<10 ){
                        u[i][k]=1;
                    }
                    break;
                }
                for(let k=j+1;k<=8;k++){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else if(x[i][k]<10){
                        u[i][k]=1;
                    }
                    break;
                }
                // tuong
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j-k>0){
                        if(x[i-k][j-k]==0 || x[i-k][j-k]==20){
                            u[i-k][j-k]=1;
                            continue;
                        }else if(x[i-k][j-k]<10 ){
                            u[i-k][j-k]=1;
                        }
                        break;
                    }else{
                        break
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j+k<=8){
                        if(x[i+k][j+k]==0 || x[i+k][j+k]==20){
                            u[i+k][j+k]=1;
                            continue;
                        }else if(x[i+k][j+k]<10){
                            u[i+k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j+k<=8){
                        if(x[i-k][j+k]==0 || x[i-k][j+k]==20){
                            u[i-k][j+k]=1;
                            continue;
                        }else if(x[i-k][j+k]<10){
                            u[i-k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j-k>0){
                        if(x[i+k][j-k]==0 || x[i+k][j-k]==20){
                            u[i+k][j-k]=1;
                            continue;
                        }else if(x[i+k][j-k]<10 ){
                            u[i+k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[i][j]==10){
                for(let k=1;k<=8;k++){
                    for(let l=1;l<=8;l++){
                        if(x[k][l]==0  || x[k][l]==20 || x[k][l]<10){
                            if((k==i-1 && l==j-1)||(k==i && l==j-1)||(k==i+1 && l==j-1)||(k==i+1 && l==j)||(k==i+1 && l==j+1)||(k==i && l==j+1)||(k==i-1 && l==j+1)||(k==i-1 && l==j)){
                                u[k][l]=1;
                            }
                        }
                    }
                }
            }
        }
    }
    return u;
}
function chieutuong_den(){
    var u=[];
    for(let i=1;i<=8;i++){
        u[i]= new Array();
    }
    for(let a=1;a<=8;a++){
        for(let b=1;b<=8;b++){
            if(x[a][b]==11){
                u[a-1][b-1]=1;
                u[a-1][b+1]=1;
            }else if(x[a][b]==15){
                for(let i=a-1;i>=1;i--){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else if(x[i][b]>10 || x[i][b]==10){
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=a+1;i<=8;i++){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else if(x[i][b]>10 || x[i][b]==10){
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=b-1;i>=1;i--){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else if(x[a][i]>10 || x[a][i]==10){
                        u[a][i]=1;
                    }
                    break;
                }
                for(let i=b+1;i<=8;i++){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else if(x[a][i]>10 || x[a][i]==10){
                        u[a][i]=1;
                    }
                    break;
                }
            }else if(x[a][b]==12){
                for(let i=1;i<=8;i++){
                    for(let j=1;j<=8;j++){
                        if(x[i][j]==0 || x[i][j]==10 || x[i][j]>10){
                            if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
            
                            }
                        }
                    }
                }
            }else if(x[a][b]==13){
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b-i>0){
                        if(x[a-i][b-i]==0 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                            continue;
                        }else if(x[a-i][b-i]>10 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b+i<=8){
                        if(x[a+i][b+i]==0 || x[a+i][b+i]==10){
                            u[a+1][b+i]=1;
                            continue;
                        }else if(x[a+i][b+i]>10 || x[a+i][b+i]==10){
                            u[a+1][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b+i<=8){
                        if(x[a-i][b+i]==0 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                            continue;
                        }else if(x[a-i][b+i]>10 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b-i>0){
                        if(x[a+i][b-i]==0 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                            continue;
                        }else if(x[a+i][b-i]>10 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[a][b]==19){
                for(let i=a-1;i>=1;i--){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else if(x[i][b]>10 || x[i][b]==10){
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=a+1;i<=8;i++){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else if(x[i][b]>10 || x[i][b]==10){
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=b-1;i>=1;i--){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else if(x[a][i]>10 || x[a][i]==10){
                        u[a][i]=1;
                    }
                    break;
                }
                for(let i=b+1;i<=8;i++){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else if(x[a][i]>10 || x[a][i]==10){
                        u[a][i]=1;
                    }
                    break;
                }
                // tuong
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b-i>0){
                        if(x[a-i][b-i]==0 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                            continue;
                        }else if(x[a-i][b-i]>10 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b+i<=8){
                        if(x[a+i][b+i]==0 || x[a+i][b+i]==10){
                            u[a+i][b+i]=1;
                            continue;
                        }else if(x[a+i][b+i]>10 || x[a+i][b+i]==10){
                            u[a+i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b+i<=8){
                        if(x[a-i][b+i]==0 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                            continue;
                        }else if(x[a-i][b+i]>10 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b-i>0){
                        if(x[a+i][b-i]==0 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                            continue;
                        }else if(x[a+i][b-i]>10 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[a][b]==20){
                for(let i=1;i<=8;i++){
                    for(let j=1;j<=8;j++){
                        if(x[i][j]==0){
                            if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
            
                            }
                        }else if(x[i][j]<=10){
                            if((i==a-1 && j==b-1)||(i==a && j==b-1)||(i==a+1 && j==b-1)||(i==a+1 && j==b)||(i==a+1 && j==b+1)||(i==a && j==b+1)||(i==a-1 && j==b+1)||(i==a-1 && j==b)){
            
                            }
                        }
                    }
                }
            }
        }
    }
    return u;
}
function Return(){
    if(h==1){
        return;
    }
    h--;
    if(luot=='den'){
        luot='trang';
    }else{
        luot='den';
    }
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            let t = document.getElementById(String(i+","+j));
            let y = document.getElementById(String(i+","+j+",1"));
            t.classList.remove("tot_den","xe_den","ma_den","tuong_den","hau_den","vua_den","tot_trang","xe_trang","ma_trang","tuong_trang","hau_trang","vua_trang","xanh","Active");
            y.classList.remove("tot_den","xe_den","ma_den","tuong_den","hau_den","vua_den","tot_trang","xe_trang","ma_trang","tuong_trang","hau_trang","vua_trang","xanh","Active");
            x[i][j] = history[h][i][j];
            switch(x[i][j]){
                case 1: t.classList.add("tot_den");
                        y.classList.add("tot_den");
                        continue;
                case 5: t.classList.add("xe_den");
                        y.classList.add("xe_den");
                        continue;
                case 2: t.classList.add("ma_den");
                        y.classList.add("ma_den");
                        continue;
                case 3: t.classList.add("tuong_den");
                        y.classList.add("tuong_den");
                        continue;
                case 9: t.classList.add("hau_den");
                        y.classList.add("hau_den");
                        continue;
                case 10: t.classList.add("vua_den");
                        y.classList.add("vua_den");
                        continue;
                case 11: t.classList.add("tot_trang");
                        y.classList.add("tot_trang");
                        continue;
                case 15: t.classList.add("xe_trang");
                        y.classList.add("xe_trang");
                        continue;
                case 12: t.classList.add("ma_trang");
                        y.classList.add("ma_trang");
                        continue;
                case 13: t.classList.add("tuong_trang");
                        y.classList.add("tuong_trang");
                        continue;
                case 19: t.classList.add("hau_trang");
                        y.classList.add("hau_trang");
                        continue;
                case 20: t.classList.add("vua_trang");
                        y.classList.add("vua_trang");
                        continue;
            }
        }
    }
    m=1;
}
function chieuhet_den(){
    var u=[];
    for(let i=1;i<=8;i++){
        u[i]= new Array();
    }
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if(x[i][j]==1){
                if(i==2){
                    if(x[i+1][j]==0){
                        u[i+1][j]=3;
                        if(x[i+2][j]==0){
                            u[i+2][j]=3;
                        }
                    }
                }else{
                    if(x[i+1][j]==0){
                        u[i+1][j]=3;
                    }
                }
                if(u[i+1][j-1]!=3){
                    u[i+1][j-1]=2;
                }
                if(u[i+1][j+1]!=3){
                    u[i+1][j+1]=2;
                }
            }else if(x[i][j]==5){
                for(let k=i-1;k>=1;k--){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else{
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=i+1;k<=8;k++){
                    if(x[k][j]==0  || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else{
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=j-1;k>=1;k--){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else{
                        u[i][k]=1;
                    }
                    break;
                }
                for(let k=j+1;k<=8;k++){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else{
                        u[i][k]=1;
                    }
                    break;
                }
            }else if(x[i][j]==2){
                for(let k=1;k<=8;k++){
                    for(let l=1;l<=8;l++){
                        if(x[k][l]==0 || x[k][l]==20 || x[k][l]<10 || x[k][l]>10){
                            if((k==i-1 && l==j-2)||(k==i+1 && l==j-2)||(k==i+2 && l==j-1)||(k==i+2 && l==j+1)||(k==i+1 && l==j+2)||(k==i-1 && l==j+2)||(k==i-2 && l==j+1)||(k==i-2 && l==j-1)){
                                u[k][l]=1;
                            }
                        }
                    }
                }
            }else if(x[i][j]==3){
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j-k>0){
                        if(x[i-k][j-k]==0 || x[i-k][j-k]==20){
                            u[i-k][j-k]=1;
                            continue;
                        }else{
                            u[i-k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j+k<=8){
                        if(x[i+k][j+k]==0 || x[i+k][j+k]==20){
                            u[i+k][j+k]=1;
                            continue;
                        }else{
                            u[i+k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j+k<=8){
                        if(x[i-k][j+k]==0 || x[i-k][j+k]==20){
                            u[i-k][j+k]=1;
                            continue;
                        }else{
                            u[i-k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j-k>0){
                        if(x[i+k][j-k]==0 || x[i+k][j-k]==20){
                            u[i+k][j-k]=1;
                            continue;
                        }else{
                            u[i+k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[i][j]==9){
                for(let k=i-1;k>=1;k--){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else{
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=i+1;k<=8;k++){
                    if(x[k][j]==0 || x[k][j]==20){
                        u[k][j]=1;
                        continue;
                    }else{
                        u[k][j]=1;
                    }
                    break;
                }
                for(let k=j-1;k>=1;k--){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else{
                        u[i][k]=1;
                    }
                    break;
                }
                for(let k=j+1;k<=8;k++){
                    if(x[i][k]==0 || x[i][k]==20){
                        u[i][k]=1;
                        continue;
                    }else{
                        u[i][k]=1;
                    }
                    break;
                }
                // tuong
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j-k>0){
                        if(x[i-k][j-k]==0 || x[i-k][j-k]==20){
                            u[i-k][j-k]=1;
                            continue;
                        }else{
                            u[i-k][j-k]=1;
                        }
                        break;
                    }else{
                        break
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j+k<=8){
                        if(x[i+k][j+k]==0 || x[i+k][j+k]==20){
                            u[i+k][j+k]=1;
                            continue;
                        }else{
                            u[i+k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i-k>0 && j+k<=8){
                        if(x[i-k][j+k]==0 || x[i-k][j+k]==20){
                            u[i-k][j+k]=1;
                            continue;
                        }else{
                            u[i-k][j+k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let k=1;k<=8;k++){
                    if(i+k<=8 && j-k>0){
                        if(x[i+k][j-k]==0 || x[i+k][j-k]==20){
                            u[i+k][j-k]=1;
                            continue;
                        }else{
                            u[i+k][j-k]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }
            if(x[i][j]==10){
                var e= i;
                var r=j;
            }
        }
    }
    let b = chieutuong_den();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if((u[i][j]==1 && (x[i][j]==0 || x[i][j]>10))||(u[i][j]==2 && x[i][j]>10)||(u[i][j]==3 && x[i][j]==0)){
                let w = x[i][j];
                x[i][j]=4;
                let v = chieutuong_den();
                x[i][j]=w;
                if(v[e][r]!=1){
                    return 1;
                }
            }
            if((x[i][j]==0 || x[i][j]>10) && b[i][j]!=1){
                if((i==e-1 && j==r-1)||(i==e && j==r-1)||(i==e+1 && j==r-1)||(i==e+1 && j==r)||(i==e+1 && j==r+1)||(i==e && j==r+1)||(i==e-1 && j==r+1)||(i==e-1 && j==r)){
                    return 1;
                }
            }
        }
    }
    return 0;

}
function chieuhet_trang(){
    var u=[];
    for(let i=1;i<=8;i++){
        u[i]= new Array();
    }
    for(let a=1;a<=8;a++){
        for(let b=1;b<=8;b++){
            if(x[a][b]==11){
                if(a==7){
                    if(x[a-1][b]==0){
                        u[a-1][b]=3;
                        if(x[a-2][b]==0){
                            u[a-2][b]=3;
                        }
                    }
                    
                }else{
                    if(x[a-1][b]==0){
                        u[a-1][b]=3;
                    }
                }
                if(u[a-1][b-1]!=3){
                    u[a-1][b-1]=2;
                }
                if(u[a-1][b+1]!=3){
                    u[a-1][b+1]=2;
                }
            }else if(x[a][b]==15){
                for(let i=a-1;i>=1;i--){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else{
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=a+1;i<=8;i++){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else{
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=b-1;i>=1;i--){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else{
                        u[a][i]=1;
                    }
                    break;
                }
                for(let i=b+1;i<=8;i++){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else{
                        u[a][i]=1;
                    }
                    break;
                }
            }else if(x[a][b]==12){
                for(let i=1;i<=8;i++){
                    for(let j=1;j<=8;j++){
                            if((i==a-1 && j==b-2)||(i==a+1 && j==b-2)||(i==a+2 && j==b-1)||(i==a+2 && j==b+1)||(i==a+1 && j==b+2)||(i==a-1 && j==b+2)||(i==a-2 && j==b+1)||(i==a-2 && j==b-1)){
                                u[i][j]=1;
                            }
                    }
                }
            }else if(x[a][b]==13){
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b-i>0){
                        if(x[a-i][b-i]==0 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                            continue;
                        }else{
                            u[a-i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b+i<=8){
                        if(x[a+i][b+i]==0 || x[a+i][b+i]==10){
                            u[a+1][b+i]=1;
                            continue;
                        }else{
                            u[a+1][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b+i<=8){
                        if(x[a-i][b+i]==0 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                            continue;
                        }else{
                            u[a-i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b-i>0){
                        if(x[a+i][b-i]==0 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                            continue;
                        }else{
                            u[a+i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }else if(x[a][b]==19){
                for(let i=a-1;i>=1;i--){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else{
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=a+1;i<=8;i++){
                    if(x[i][b]==0 || x[i][b]==10){
                        u[i][b]=1;
                        continue;
                    }else{
                        u[i][b]=1;
                    }
                    break;
                }
                for(let i=b-1;i>=1;i--){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else{
                        u[a][i]=1;
                    }
                    break;
                }
                for(let i=b+1;i<=8;i++){
                    if(x[a][i]==0 || x[a][i]==10){
                        u[a][i]=1;
                        continue;
                    }else{
                        u[a][i]=1;
                    }
                    break;
                }
                // tuong
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b-i>0){
                        if(x[a-i][b-i]==0 || x[a-i][b-i]==10){
                            u[a-i][b-i]=1;
                            continue;
                        }else{
                            u[a-i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b+i<=8){
                        if(x[a+i][b+i]==0 || x[a+i][b+i]==10){
                            u[a+i][b+i]=1;
                            continue;
                        }else{
                            u[a+i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a-i>0 && b+i<=8){
                        if(x[a-i][b+i]==0 || x[a-i][b+i]==10){
                            u[a-i][b+i]=1;
                            continue;
                        }else{
                            u[a-i][b+i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
                for(let i=1;i<=8;i++){
                    if(a+i<=8 && b-i>0){
                        if(x[a+i][b-i]==0 || x[a+i][b-i]==10){
                            u[a+i][b-i]=1;
                            continue;
                        }else{
                            u[a+i][b-i]=1;
                        }
                        break;
                    }else{
                        break;
                    }
                }
            }
            if(x[a][b]==20){
                var e= a;
                var r=b;
            }
        }
    }
    let b = chieutuong_trang();
    for(let i=1;i<=8;i++){
        for(let j=1;j<=8;j++){
            if((u[i][j]==1 && (x[i][j]==0 || x[i][j]<10))||(u[i][j]==2 && x[i][j]<10 && x[i][j]!=0)||(u[i][j]==3 && x[i][j]==0)){
                let w = x[i][j];
                x[i][j]=14;
                let v = chieutuong_trang();
                x[i][j]=w;
                if(v[e][r]!=1){
                    return 1;
                }
            }
            if((x[i][j]==0 || x[i][j]<=10) && b[i][j]!=1){
                if((i==e-1 && j==r-1)||(i==e && j==r-1)||(i==e+1 && j==r-1)||(i==e+1 && j==r)||(i==e+1 && j==r+1)||(i==e && j==r+1)||(i==e-1 && j==r+1)||(i==e-1 && j==r)){
                    return 1;
                }
            }
        }
    }
    return 0;
}
	</script>
